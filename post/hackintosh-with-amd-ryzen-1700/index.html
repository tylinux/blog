<!doctype html>
<html lang="zh_CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title>AMD Ryzen 1700 也吃黑苹果 | 不正经的正经程序猿</title>
    <meta property="og:title" content="AMD Ryzen 1700 也吃黑苹果 - 不正经的正经程序猿">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2019-05-07T19:10:39&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2019-05-07T19:10:39&#43;08:00'>
        
    <meta name="Keywords" content="iOS,macOS,逆向,Reverse,RE,越狱,jailbreak,xnure">
    <meta name="description" content="AMD Ryzen 1700 也吃黑苹果">
        
    <meta name="author" content="tylinux">
    <meta property="og:url" content="https://www.tylinux.com/post/hackintosh-with-amd-ryzen-1700/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://www.tylinux.com/">
                        不正经的正经程序猿
                    </a>
                
                <p class="description">一个人的命运啊，当然要靠自我奋斗，但是也要考虑历史的行程</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://www.tylinux.com/">首页</a>
                    
                    <a  href="https://www.tylinux.com/archives/" title="归档">归档</a>
                    
                    <a  href="https://www.tylinux.com/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">AMD Ryzen 1700 也吃黑苹果</h1>
        </header>
        <date class="post-meta meta-date">
            2019年5月7日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='/categories/%E7%A1%AC%E4%BB%B6'>硬件</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <p>公司配发的笔记本是 <code>MacBook Pro 15' Mid 2015</code>，随着公司工程的逐步膨胀，老家伙干活越来越吃力。便有了组建一台黑苹果干编译这些脏活儿累活儿，笔记本就用来开会的想法。</p>
<h2 id="双路-e5">双路 E5</h2>
<p>关于黑苹果的配置，考虑了好几种方案，原本是准备上双路 E5 洋垃圾，配置方案如下：</p>
<table>
<thead>
<tr>
<th>配件</th>
<th>型号</th>
<th>价格</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU</td>
<td>E5-2667 v2 x 2</td>
<td>985 x 2</td>
</tr>
<tr>
<td>内存</td>
<td>三星 DDR3 1866 ECC REG 16GB * 4</td>
<td>158 x 4</td>
</tr>
<tr>
<td>主板</td>
<td>超微 X9DAi</td>
<td>1580</td>
</tr>
<tr>
<td>显卡</td>
<td>XFX RX570 4G 矿渣</td>
<td>299</td>
</tr>
<tr>
<td>电源</td>
<td>长城矿龙 1250W 模组电源</td>
<td>158</td>
</tr>
<tr>
<td>机箱</td>
<td>先马坦克3</td>
<td>199</td>
</tr>
</tbody>
</table>
<p>但是这个配置问题在于，主板太贵了，还是二手的；双路 E5 的功耗又很大。E5 的黑苹果也没看到很多文章。就在爬楼找 E5 黑苹果的教程贴的过程中，发现了这个 <a href="https://github.com/cheneyveron/clover-x79-e5-2670-gtx650">repo</a>。作者在文档中有这么一段：</p>
<blockquote>
<p>如今X79只能使用DDR3内存，最高1866MHz，并且E5 v2处理器性价比已经不高。Intel 7系以上处理器性价比极低，新配电脑推荐使用Ryzen + x370主板。Ryzen黑苹果我自认为已经找到了一种近乎&quot;完美&quot;的方案：见<a href="https://www.itmanbu.com/ryzen-hackintosh-using-kvm-proxmox.html">我的博客</a>、<a href="http://bbs.pcbeta.com/viewthread-1813655-1-1.html">远景论坛</a></p>
</blockquote>
<h2 id="amd-yes">AMD YES！</h2>
<p>在作者的博客中，介绍了在 <code>Proxmox</code> 系统中借助 <code>KVM</code> 安装 macOS 的方法。经过作者测试，虚拟化的 macOS 在 CPU 性能上会有 5% 左右的损失，GPU 性能因为可以 PCI passthrough，所以理论上是没有损失的。</p>
<p>在之后的爬贴过程中，又发现了作者在 PCBeta 中发的另一贴：<a href="http://bbs.pcbeta.com/viewthread-1814040-1-4.html">AMD Ryzen不用替换内核，裸机性能爆炸，还能使用iMessage/直接升级</a>。我之前之所以不考虑使用 AMD 平台黑苹果，是因为传统 AMD 黑苹果需要替换内核，系统升级会比较滞后。在这个帖子中，作者介绍了 <a href="https://github.com/AMD-OSX/AMD_Vanilla">AMD_Vanilla</a> 这个项目。此项目是基于 Clover EFI 提供的 KernelToPatch 功能，对 macOS 的内核进行 Patch，使其可以正常运行在 AMD 平台上。解决了传统 AMD 黑苹果因为修改系统文件导致 Facetime、iMessage 等系统软件无法运行的问题。但同时，因为其原理还是对内核打补丁，所以一些依赖 Intel 平台特性的软件，比如 VMware Fusion、Docker等还是无法运行。不过开源的 VirtualBox 是可以正常运行在 AMD 平台下的，我平台也就需要运行个 Windows 和 Genymotion，这些都是可以在 VirtualBox 里运行的。就是你了！</p>
<p><strong>AMD YES！</strong></p>
<p>我最喜欢 AMD 的两点：便宜、更新不换主板，所以在 Ryzen zen 和 zen+ 中，我选择了前者，毕竟，现在散片 Ryzen 1700 才 890！新的配置单如下：</p>
<table>
<thead>
<tr>
<th>配件</th>
<th>型号</th>
<th>价格</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU</td>
<td>Ryzen 1700 散片</td>
<td>板U套装</td>
</tr>
<tr>
<td>主板</td>
<td>华硕 Prime X370 Pro</td>
<td>1509</td>
</tr>
<tr>
<td>内存</td>
<td>十铨冥神 DDR4 3000 16GB x 2</td>
<td>1139</td>
</tr>
<tr>
<td>显卡</td>
<td>XFX RX570 4G 矿渣</td>
<td>299</td>
</tr>
<tr>
<td>电源</td>
<td>鑫谷 GP700G  600W 全模组电源</td>
<td>439</td>
</tr>
<tr>
<td>机箱</td>
<td>追风者 P300</td>
<td>249</td>
</tr>
<tr>
<td>散热</td>
<td>大镰刀 STB120</td>
<td>112</td>
</tr>
<tr>
<td>硬盘</td>
<td>西部数据 SN750 500GB</td>
<td>559</td>
</tr>
</tbody>
</table>
<p>以 4K 出头的价格组装完成了我的第一台 AMD 黑苹果，除了矿渣显卡，其他的都是全新件，而且等 Zen2 上市，2700X 价格崩盘的时候还可以升级一波 Zen+ 7nm.</p>
<p><strong>AMD YES！</strong></p>
<h2 id="装机略">装机（略）</h2>
<h2 id="装系统">装系统</h2>
<p>装机完成之后，按照 <a href="https://hack.slim.ovh/">https://hack.slim.ovh/</a> 提供的教程一步一步来就可以。</p>
<p>我装系统的时候偷了个懒。事情是这个样子的：</p>
<p>我去年的时候嫌弃 MacBook Pro 里的 256GB SSD不够用，就自己升级了 Intel 760P 1TB。后来笔记本的反光涂层大规模脱落 + 电池鼓包，趁五一假期有空，就送去了 GeniusBar 更换屏幕和电池。自己后换的 SSD 自然就被我拆下来了。在装机的时候，媳妇儿一句：<code>你装完系统还得配环境吧？</code> 提醒了我，我何不尝试直接引导原来 SSD 上的系统，所以，我只制作了一个 Clover 引导 U 盘，就完事儿了。。。</p>
<h2 id="小问题解决">小问题解决</h2>
<p>系统跑起来了，常用的应用也可以很正常地跑起来，不过还是有些小小的问题需要修复一下。</p>
<h3 id="主板-9针-usb-接口无效">主板 9针 USB 接口无效</h3>
<p>之前买的 Apple 无线网卡+蓝牙需要连接主板上的9针 USB 接口，然而我怎么插也没有反应。进入 Windows 系统中是可以正常识别硬件的，那就说明是 macOS 的问题。一通瞎捣鼓，通过增加 USB 端口限制补丁解决了，就是在 Clover Configurator 中启用下边几项（应该是其中一项有左右，懒得测试了）</p>
<p>
        <img class="mx-auto" alt="15572319696203" src="https://i.loli.net/2019/05/08/5cd23a7cd225f.jpg" />   
    </p>
<h3 id="无法打开-jpg-图片">无法打开 jpg 图片</h3>
<p>原因是在 10.14 系统中，如果有核心显卡的话，默认会使用核心显卡硬解码 JPG 图片。我在 Clover 仿冒的设备型号是 iMac 14,2，是有核心显卡的机型，然而 Ryzen 1700并没有核显，所以就 GG 了。解决方法有俩：</p>
<ol>
<li>仿冒没有核显的设备型号，比如 Mac Pro</li>
<li>使用 <a href="https://github.com/vulgo/NoVPAJpeg">NoVPAJpeg</a> 关闭 JPG 硬解码</li>
</ol>
<p>我选择了第二种。</p>
<h3 id="关于设备-中-cpu-型号显示-unknown">“关于设备” 中 CPU 型号显示 Unknown</h3>
<p>毕竟 Mac 没有使用 Ryzen CPU 的设备型号。修改方法：</p>
<p>使用 <code>Plistedit Pro</code> 或者其他可以编辑 bplist 文件的编辑器，打开 <code>/System/Library/PrivateFrameworks/AppleSystemInfo.framework/Versions/A/Resources/你系统的语言（比如 en.lproj）</code> 目录下的 <code>AppleSystemInfo.strings</code> 文件，把其中的 <code>&lt;key&gt;UnknownCPUKind&lt;/key&gt;</code> 的值改成相应的 CPU 型号，比如 AMD Ryzen 1700。</p>
<h3 id="docker-无法使用">Docker 无法使用</h3>
<p>偶尔还是需要用一下 docker 的，所以得想办法把它跑起来。修改方案是把 docker engine 跑在 virtualbox 里，具体方法如下：</p>
<ol>
<li>
<p>使用 docker-machine 命令创建新的 docker engine 环境：</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker-machine create -d virtualbox --virtualbox-no-vtx-check default
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>修改 docker 环境变量</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">eval <span style="color:#66d9ef">$(</span>docker-machine env<span style="color:#66d9ef">)</span>
</code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="遇到再更新">(遇到再更新)</h3>
        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://www.tylinux.com/">tylinux</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://www.tylinux.com/post/hackintosh-with-amd-ryzen-1700/">https://www.tylinux.com/post/hackintosh-with-amd-ryzen-1700/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/post/pwnable-0x01-orw/">pwnable.tw 0x1 orw writeup</a></li>
        
        <li><a href="/post/pwnable-0x00-start/">pwnable.tw 0x0 start writeup</a></li>
        
        <li><a href="/post/install-jenkins-with-docker-on-synology/">在群晖中使用 Docker 安装 Jenkins</a></li>
        
        <li><a href="/post/upgrade-from-iOS-11-1-2-to-iOS-11-3-1-with-blob/">使用 futurerestore 从 iOS 11.1.2 升级至 11.3.1</a></li>
        
        <li><a href="/post/Remount-rootfs-after-iOS-11-3/">(译) 在 iOS 11.3 之后的系统中 remount RootFS 为可读写</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/hackintosh'>hackintosh</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "tylinux/BlogComments"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2021 <a href="https://www.tylinux.com/">不正经的正经程序猿 By
            tylinux</a>
        
    </div>
    <br />
    
</footer>



<script type="text/javascript">
    window.MathJax = {
        tex2jax: {
            inlineMath: [['$', '$']],
            processEscapes: true
        }
    };
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



<script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='//www.google.com/search' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://www.tylinux.com/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://www.tylinux.com/post/install_hassos_in_pve/" title="在 PVE 中安装 HAOS">在 PVE 中安装 HAOS</a>
    </li>
    
    <li>
        <a href="https://www.tylinux.com/post/hack_boyun_ipcamera_01/" title="也折腾博云物联辣鸡网络摄像头（上）">也折腾博云物联辣鸡网络摄像头（上）</a>
    </li>
    
    <li>
        <a href="https://www.tylinux.com/post/install_gitlab_runner_on_android/" title="Android 设备上使用 Termux 安装运行 gitlab-runner">Android 设备上使用 Termux 安装运行 gitlab-runner</a>
    </li>
    
    <li>
        <a href="https://www.tylinux.com/post/one_small_cocoapods_issue/" title="CocoaPods 小坑一例">CocoaPods 小坑一例</a>
    </li>
    
    <li>
        <a href="https://www.tylinux.com/post/add_usb_and_dc_power_for_hp_elite_pad_1000_g2/" title="翻车日记0: HP ElitePad 1000 G2 加装 USB 2.0 接口">翻车日记0: HP ElitePad 1000 G2 加装 USB 2.0 接口</a>
    </li>
    
    <li>
        <a href="https://www.tylinux.com/post/fix_jietu_crash_with_reverse_method/" title="利用逆向知识修复 『Jietu.app 』在 macOS Big Sur 下的崩溃问题">利用逆向知识修复 『Jietu.app 』在 macOS Big Sur 下的崩溃问题</a>
    </li>
    
    <li>
        <a href="https://www.tylinux.com/post/downgrade-iOS-13-3-to-13-2-3/" title="iPhone SE 降级 iOS 13.2.3">iPhone SE 降级 iOS 13.2.3</a>
    </li>
    
    <li>
        <a href="https://www.tylinux.com/post/build-virtualbox-on-macOS-10.15/" title="macOS 10.15.1 下编译 VirtualBox 6.1.0">macOS 10.15.1 下编译 VirtualBox 6.1.0</a>
    </li>
    
    <li>
        <a href="https://www.tylinux.com/post/hackintosh-with-amd-ryzen-3700x/" title="喜提新开(you)发(xi)机">喜提新开(you)发(xi)机</a>
    </li>
    
    <li>
        <a href="https://www.tylinux.com/post/develop-mcs51-on-macOS/" title="macOS 下开发 51 单片机应用">macOS 下开发 51 单片机应用</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://www.tylinux.com/categories/%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%AE%89%E5%85%A8/">二进制安全 (2)</a></li>
    
    <li><a href="https://www.tylinux.com/categories/%E5%BC%80%E5%8F%91/">开发 (3)</a></li>
    
    <li><a href="https://www.tylinux.com/categories/%E7%A1%AC%E4%BB%B6/">硬件 (5)</a></li>
    
    <li><a href="https://www.tylinux.com/categories/%E7%B3%BB%E7%BB%9F%E5%BA%94%E7%94%A8/">系统应用 (4)</a></li>
    
    <li><a href="https://www.tylinux.com/categories/%E9%80%86%E5%90%91%E7%A0%94%E7%A9%B6/">逆向研究 (8)</a></li>
    
    <li><a href="https://www.tylinux.com/categories/%E9%9A%8F%E6%89%8B%E8%AE%B0/">随手记 (1)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://www.tylinux.com/tags/51/">51</a>
    
    <a href="https://www.tylinux.com/tags/Console/">Console</a>
    
    <a href="https://www.tylinux.com/tags/Cydia/">Cydia</a>
    
    <a href="https://www.tylinux.com/tags/Jailbreak/">Jailbreak</a>
    
    <a href="https://www.tylinux.com/tags/reverse/">reverse</a>
    
    <a href="https://www.tylinux.com/tags/SHSH/">SHSH</a>
    
    <a href="https://www.tylinux.com/tags/android/">android</a>
    
    <a href="https://www.tylinux.com/tags/arm/">arm</a>
    
    <a href="https://www.tylinux.com/tags/docker/">docker</a>
    
    <a href="https://www.tylinux.com/tags/hackintosh/">hackintosh</a>
    
    <a href="https://www.tylinux.com/tags/iOS/">iOS</a>
    
    <a href="https://www.tylinux.com/tags/jenkins/">jenkins</a>
    
    <a href="https://www.tylinux.com/tags/linux/">linux</a>
    
    <a href="https://www.tylinux.com/tags/macOS/">macOS</a>
    
    <a href="https://www.tylinux.com/tags/overflow/">overflow</a>
    
    <a href="https://www.tylinux.com/tags/pwn/">pwn</a>
    
    <a href="https://www.tylinux.com/tags/reverse/">reverse</a>
    
    <a href="https://www.tylinux.com/tags/ryzen/">ryzen</a>
    
    <a href="https://www.tylinux.com/tags/synology/">synology</a>
    
    <a href="https://www.tylinux.com/tags/tweak/">tweak</a>
    
    <a href="https://www.tylinux.com/tags/virtualbox/">virtualbox</a>
    
    <a href="https://www.tylinux.com/tags/%E5%8D%95%E7%89%87%E6%9C%BA/">单片机</a>
    
    <a href="https://www.tylinux.com/tags/%E7%A1%AC%E4%BB%B6/">硬件</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://www.tylinux.com/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>