---
title: [macOS]ç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯é€†å‘åˆ†æï¼ˆ1ï¼‰
date: 2017-07-19 10:06:04
tags:
---

# [macOS]ç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯é€†å‘åˆ†æï¼ˆ1ï¼‰
## è·å–WebAppå†…å®¹
è¿›å…¥``NeteaseMusic.app/Contents``ç›®å½•è§‚å¯Ÿï¼Œæ—©å°±å¬é—»ç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯æ˜¯ä¸ªHybird Appï¼Œé‚£æƒ³å¿…``Resources``ç›®å½•ä¸€å®šæœ‰ç›¸åº”çš„Webä»£ç èµ„æºï¼Œlsåè§‚å¯Ÿï¼Œåœ¨ä¸€å †å›¾ç‰‡æ–‡ä»¶é‡Œæœ‰ä¸ª**resources.pack**æ–‡ä»¶å¾ˆæ˜¾çœ¼ï¼š
![](/images/15004311017406.jpg)

æŸ¥çœ‹ä¸‹æ–‡ä»¶ç±»å‹ï¼š

````shell
file resources.pack
````

zipå‹ç¼©æ–‡ä»¶ï¼å°è¯•è§£å‹ï¼š

```shell
unzip resources.pack
```

éœ€è¦è¾“å…¥å¯†ç ğŸ˜­ã€‚ã€‚ã€‚
![](/images/15004311155914.jpg)

å¯åŠ¨Hopperï¼Œæ‰“å¼€ç½‘æ˜“äº‘çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œç¨ç­‰åˆ†æå®Œæ¯•ä¹‹åï¼Œå°è¯•æœç´¢**unzip**å…³é”®å­—ï¼Œæ¯•ç«Ÿä»–å¾—å…ˆè§£å‹å˜›

![](/images/15004311249604.jpg)

å‘ç°æœ‰ä¸ªYYYWebfilesManagerçš„ç±»å¾ˆå¯ç–‘ï¼Œå°¤å…¶æ˜¯çœ‹åˆ°å®ƒçš„ä¼ªç çš„æ—¶å€™ï¼š

![](/images/15004311460633.jpg)

å¯åŠ¨cycriptï¼ŒæŒ‚åˆ°è¿è¡Œç€çš„NeteaseMusicè¿›ç¨‹ä¸Šï¼Œç›´æ¥è°ƒä¸€ä¸‹è¿™å‡ ä¸ªæ–¹æ³•ï¼š

![](/images/15004311612498.jpg)

å¾ˆHighï¼Œç°åœ¨æ–‡ä»¶å·²ç»è§£å‹å‡ºæ¥äº†ï¼Œåªéœ€è¦æŠŠå®ƒä»¬ä»å†…å­˜ä¿å­˜åˆ°ç¡¬ç›˜æ—¢å¯ã€‚class-dumpä¸€ä¸‹ï¼Œçœ‹ä¸€çœ¼``ZipArchive``çš„Apiï¼š

```shell
class-dump NeteaseMusic -H -o headers

cat headers/ZipArchive.h
```

å†…å®¹å¦‚ä¸‹

```objc
//
//     Generated by class-dump 3.5 (64 bit).
//
//     class-dump is Copyright (C) 1997-1998, 2000-2001, 2004-2013 by Steve Nygard.
//

#import "NSObject.h"

@class NSArray, NSFileManager, NSString;

@interface ZipArchive : NSObject
{
    void *_zipFile;
    void *_unzFile;
    unsigned long long _numFiles;
    NSString *_password;
    id _delegate;
    CDUnknownBlockType _progressBlock;
    NSArray *_unzippedFiles;
    NSFileManager *_fileManager;
    unsigned long long _stringEncoding;
}

@property(nonatomic) unsigned long long stringEncoding; // @synthesize stringEncoding=_stringEncoding;
@property(copy, nonatomic) CDUnknownBlockType progressBlock; // @synthesize progressBlock=_progressBlock;
@property(readonly, nonatomic) NSArray *unzippedFiles; // @synthesize unzippedFiles=_unzippedFiles;
@property(copy, nonatomic) NSString *password; // @synthesize password=_password;
@property(readonly, nonatomic) unsigned long long numFiles; // @synthesize numFiles=_numFiles;
@property(retain, nonatomic) id <ZipArchiveDelegate> delegate; // @synthesize delegate=_delegate;
- (id)Date1980;
- (BOOL)OverWrite:(id)arg1;
- (void)OutputErrorMessage:(id)arg1;
- (id)getZipFileContents;
- (BOOL)UnzipCloseFile;
- (id)UnzipFileToMemory;
- (BOOL)UnzipFileTo:(id)arg1 overWrite:(BOOL)arg2;
- (BOOL)UnzipOpenFile:(id)arg1 Password:(id)arg2;
- (BOOL)UnzipOpenFile:(id)arg1;
- (BOOL)CloseZipFile2;
- (BOOL)addFileToZip:(id)arg1 newname:(id)arg2;
- (BOOL)CreateZipFile2:(id)arg1 Password:(id)arg2;
- (BOOL)CreateZipFile2:(id)arg1;
- (void)dealloc;
- (id)initWithFileManager:(id)arg1;
- (id)init;

@end
```

æ³¨æ„åˆ°``- (BOOL)UnzipFileTo:(id)arg1 overWrite:(BOOL)arg2;``è¿™ä¸ªApiï¼Œç›´æ¥åœ¨cycriptç¯å¢ƒä¸­è¾“å…¥ï¼š

``` objc
[manager UnzipFileTo:@"/Users/kevin/Developer/Reverse/NeteaseMusic" overWrite: YES]
```

OKï¼Œæ­¤åˆ»webfileså·²ç»ä¹–ä¹–åœ°èººåœ¨ç¡¬ç›˜é‡Œäº†~
![](/images/15004311896870.jpg)



